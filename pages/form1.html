<!DOCTYPE html>
<html>
  
<head>
  <link rel="stylesheet" href="formstyle.css">
    </head>
  
  

  
<body>  
 <div class="grid"> 
  <div class="header">
   <p style="font-size:30px;font-family:'Arial', cursive;"> to buy copy fill out form hit submit (๑•́ ₃ •̀๑) </p>
   </div>
  <div class="leftcolumn">
   <form id="formElem"> 
    <br>
    <br>
    <br>
      <label for="firstName">First name:</label><br>
      <input type="text" id="firstName" name="firstName"><br>
      <label for="lastName">Last name:</label><br>
      <input type="text" id="lastName" name="lastName"><br>
      <label for="email">Email Address:</label><br>
      <input type="text" id="email" name="email"><br>
      <label for="mailingAddress">Mailing Address:</label><br>
      <textarea rows = "5" id="mailingAddress" cols = "40" for="mailingAddress"></textarea>      
      <br>
      <br>
     <p style="font-size:16px;font-family:'monospace;';text-align: left; color:yellow;"> shipping only available within the EU </p>
       <br><br>
      <input type="checkbox" id="mailingList" name="mailingList">
      <label for="mailingList"> email me when new releases are available</label>
    <br>
    <br>
    <br>
    <br>
  <input id="submit" type="submit" value="Submit">
    
    </form>
        </div>
   <div class="rightcolumn">
     <img src="secretcover2.jpg" style="height:100%;width:100%;" alt="secretlifer">
     </div>
     <div class="footer">
        <a href="../index.html">
          <p style="text-align: right;"> ----> return </p>
        </a>
     </div>
   
    </div>
  </body>

  <script>
  console.log("1")
  document.getElementById("submit").onclick =  async (e) => {
      console.log("2")
      console.log(e)
      var form = document.getElementById("formElem");
     // var form = document.forms[0];

        body = {
          firstName : document.getElementById("firstName").value,
          lastName : document.getElementById("lastName").value,
          email : document.getElementById("email").value,
          mailingAddress : document.getElementById("mailingAddress").value,
          optInNewReleases : document.getElementById("mailingList").value, 
        }
        console.log("3")
        console.log(body)

        try {
          let response = await fetch('https://6j5whe5ni9.execute-api.us-east-2.amazonaws.com/prod/orders', {
                method: 'POST', // or 'PUT'
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(body),
        })
        } catch (error) {
          console.error(error);
          
        console.log("4")}

        // let text = await response.text(); // read response body as text
        // document.querySelector("#decoded").innerHTML = text;}
  
  </script>
  
</html>
