<!DOCTYPE html>
<html>
  
<head>
  <link rel="stylesheet" href="formstyle2.css">
    </head>
  
<body>  
  
 <div class="grid"> 

  <p class="banner">
  
  letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.letzterkussdesengels.site.</p>
  <div class="header">
    
    <p>VD023: duskblade2332 - Sorcerer's Scroll - Compact Flash [12€ + Shipping] </p>
    <p class="releasedBy"> released by Liga do Vento Divino</p>

   </div>

   <div class="leftcolumn">
    <img src="duskblade.jpg" style="height:100%;width:100%;" alt="duskblade">
    <div class="leftcolumn_overlay">
     <a href="https://www.discogs.com/release/21674704-duskblade2332-Sorcerers-Scroll">
         <p style="color:white;background-color: black;"> https://www.discogs.com/release/21674704-duskblade2332-Sorcerers-Scroll </p>
       </a>    
       </div>
    </div>
  
   <div class="rightcolumn">

    <form id="formElem">            

      <label for="firstName">First name:</label><br>
      <textarea rows="1" cols="40" id ="firstName" for="firstName"></textarea><br>
      <label for="lastName">Last name:</label><br>
      <textarea rows="1" cols="40" id ="lastName" for="lastName"></textarea><br>
      <label for="email">Email Address:</label><br>
      <textarea rows="1" cols="40" id ="email" for="email"></textarea><br>
      <label for="mailingAddress">Mailing Address:</label><br>
      <textarea rows = "5" id="mailingAddress" cols = "40" for="mailingAddress"></textarea><br><br>
      <label for="country">Country:</label><br>
      <select id="country" for="country">
          <option value=""> -- Select One </option>
          <option value="be"> Belgium </option>
          <option value="bg"> Bulgaria </option>
          <option value="cz"> Czechia </option>
          <option value="dk"> Denmark </option>
          <option value="de"> Germany </option>
          <option value="ee"> Estonia </option>
          <option value="ie"> Ireland </option>
          <option value="el"> Greece </option>
          <option value="es"> Spain </option>
          <option value="fr"> France </option>
          <option value="hr"> Croatia </option>
          <option value="it"> Italy </option>
          <option value="is"> Iceland </option>
          <option value="cy"> Cyprus </option>
          <option value="lv"> Latvia </option>
          <option value="li"> Liechtenstein </option>
          <option value="lt"> Lithuania </option>
          <option value="lu"> Luxembourg </option>
          <option value="hu"> Hungary </option>
          <option value="mt"> Malta </option>
          <option value="nl"> Netherlands </option>
          <option value="no"> Norway </option>
          <option value="at"> Austria </option>
          <option value="pl"> Poland </option>
          <option value="pt"> Portugal </option>
          <option value="ro"> Romania </option>
          <option value="ru"> Russia </option>
          <option value="si"> Slovenia </option>
          <option value="sk"> Slovakia </option>
          <option value="ch"> Switzerland </option>
          <option value="fi"> Finland </option>
          <option value="se"> Sweden </option>
          <option value="uk"> United Kingdom </option>
          
        </select>
        <br>    
        <br>
        <input type="checkbox" id="mailingList" class="mailingCheckbox" name="mailingList" value="no">
        <label for="mailingList" class="mailingCheckboxText"> Add me to the mailing list  </label><br>

        <br>
        <input id="submit" type="button" value="Submit"><br><br>
        
      <p class="payInstructions"> <mark class="highlight">**you'll get an email with instructions for how to pay**</mark> </p>
    
    </form>

        </div>


     <div class="footer">
      <br>
      <iframe width="1280" height="100" scrolling="no" frameborder="no" show_artwork="false" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1199275537&color=%23150200&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe><div style="font-size: 10px; color: #000000;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/duskblade2332" title="duskblade2332" target="_blank" style="color: #000000; text-decoration: none;"></a> · <a href="https://soundcloud.com/duskblade2332/sorcerers-scroll-snippets-ldvd-1" title="Sorcerer&#x27;s Scroll - snippets [ldvd]" target="_blank" style="color: #000000; text-decoration: none;"></a></div>
      <br>
         <a href="../index.html">
          <p style="text-align: center;"class="returnMarker"><mark class="highlight"> <-> return</mark> </p>
        </a>

     </div>
   
    </div>
  </body>

  <script>


  document.getElementById("submit").onclick =  async (e) => {

       
    var dateObject = new Date();
    var formattedDate = "Ordered On: "+dateObject.getDate()+"/"+(dateObject.getMonth()+1)+"/"+dateObject.getFullYear()+" "+dateObject.getHours()+":"+dateObject.getMinutes()+ ":"+dateObject.getSeconds();
    var mailingListVar = document.getElementById("mailingList").checked;

      if (document.getElementById("firstName").value != "" && document.getElementById("lastName").value != "" &&
          document.getElementById("email").value != "" && document.getElementById("mailingAddress").value != "" && document.getElementById("country").value != "") {  

                theButton = document.getElementById("submit");
                theButton.disabled = "disabled";
                theButton.value = "Please Wait..."; 

                const body = {

                  key : "vd023",
                  price: "12", 
                  releaseType: "tape",
                  firstName : document.getElementById("firstName").value,
                  lastName : document.getElementById("lastName").value,
                  email : document.getElementById("email").value,
                  mailingAddress : document.getElementById("mailingAddress").value,
                  country: document.getElementById("country").value,
                  mailingList: mailingListVar,
                  date : formattedDate
                }

                let response = await fetch('https://6j5whe5ni9.execute-api.us-east-2.amazonaws.com/prod/orders', {
                    method: 'POST',
                    body: JSON.stringify(body),
                });
         
                if (response.status === 400) {
                    console.log("I am sold out");
                    window.location = "soldOut.html";
                } else if (response.status === 200) {
                    console.log(response);
                    window.location = "orderComplete.html";
                } else {
                  window.location = "soldOut.html";
                  console.error('Network Error ):');
                }
            }
        else {
          alert("you forgot something");
        }
      }
  
  </script>
  
</html>
